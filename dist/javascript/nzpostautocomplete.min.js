!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.nzpostautocomplete=e()}}(function(){return function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n||e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){t.exports=e("./lib/axios")},{"./lib/axios":3}],2:[function(e,t,n){(function(n){"use strict";var r=e("./../utils"),i=e("./../core/settle"),o=e("./../helpers/buildURL"),s=e("./../helpers/parseHeaders"),u=e("./../helpers/isURLSameOrigin"),a=e("../core/createError"),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||e("./../helpers/btoa");t.exports=function(t){return new Promise(function(l,f){var d=t.data,h=t.headers;r.isFormData(d)&&delete h["Content-Type"];var p=new XMLHttpRequest,m="onreadystatechange",v=!1;if("test"===n.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||u(t.url)||(p=new window.XDomainRequest,m="onload",v=!0,p.onprogress=function(){},p.ontimeout=function(){}),t.auth){var g=t.auth.username||"",y=t.auth.password||"";h.Authorization="Basic "+c(g+":"+y)}if(p.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p[m]=function(){if(p&&(4===p.readyState||v)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null,n=t.responseType&&"text"!==t.responseType?p.response:p.responseText,r={data:n,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:e,config:t,request:p};i(l,f,r),p=null}},p.onerror=function(){f(a("Network Error",t,null,p)),p=null},p.ontimeout=function(){f(a("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var b=e("./../helpers/cookies"),w=(t.withCredentials||u(t.url))&&t.xsrfCookieName?b.read(t.xsrfCookieName):void 0;w&&(h[t.xsrfHeaderName]=w)}if("setRequestHeader"in p&&r.forEach(h,function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)}),t.withCredentials&&(p.withCredentials=!0),t.responseType)try{p.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(e){p&&(p.abort(),f(e),p=null)}),void 0===d&&(d=null),p.send(d)})}}).call(this,e("_process"))},{"../core/createError":9,"./../core/settle":12,"./../helpers/btoa":16,"./../helpers/buildURL":17,"./../helpers/cookies":19,"./../helpers/isURLSameOrigin":21,"./../helpers/parseHeaders":23,"./../utils":25,_process:28}],3:[function(e,t,n){"use strict";function r(e){var t=new s(e),n=o(s.prototype.request,t);return i.extend(n,s.prototype,t),i.extend(n,t),n}var i=e("./utils"),o=e("./helpers/bind"),s=e("./core/Axios"),u=e("./defaults"),a=r(u);a.Axios=s,a.create=function(e){return r(i.merge(u,e))},a.Cancel=e("./cancel/Cancel"),a.CancelToken=e("./cancel/CancelToken"),a.isCancel=e("./cancel/isCancel"),a.all=function(e){return Promise.all(e)},a.spread=e("./helpers/spread"),t.exports=a,t.exports.default=a},{"./cancel/Cancel":4,"./cancel/CancelToken":5,"./cancel/isCancel":6,"./core/Axios":7,"./defaults":14,"./helpers/bind":15,"./helpers/spread":24,"./utils":25}],4:[function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},{}],5:[function(e,t,n){"use strict";function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}var i=e("./Cancel");r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},t.exports=r},{"./Cancel":4}],6:[function(e,t,n){"use strict";t.exports=function(e){return!(!e||!e.__CANCEL__)}},{}],7:[function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new s,response:new s}}var i=e("./../defaults"),o=e("./../utils"),s=e("./InterceptorManager"),u=e("./dispatchRequest");r.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,this.defaults,{method:"get"},e),e.method=e.method.toLowerCase();var t=[u,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},o.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),t.exports=r},{"./../defaults":14,"./../utils":25,"./InterceptorManager":8,"./dispatchRequest":10}],8:[function(e,t,n){"use strict";function r(){this.handlers=[]}var i=e("./../utils");r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},t.exports=r},{"./../utils":25}],9:[function(e,t,n){"use strict";var r=e("./enhanceError");t.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},{"./enhanceError":11}],10:[function(e,t,n){"use strict";function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=e("./../utils"),o=e("./transformData"),s=e("../cancel/isCancel"),u=e("../defaults"),a=e("./../helpers/isAbsoluteURL"),c=e("./../helpers/combineURLs");t.exports=function(e){return r(e),e.baseURL&&!a(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||u.adapter)(e).then(function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(r(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},{"../cancel/isCancel":6,"../defaults":14,"./../helpers/combineURLs":18,"./../helpers/isAbsoluteURL":20,"./../utils":25,"./transformData":13}],11:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e}},{}],12:[function(e,t,n){"use strict";var r=e("./createError");t.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},{"./createError":9}],13:[function(e,t,n){"use strict";var r=e("./../utils");t.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},{"./../utils":25}],14:[function(e,t,n){(function(n){"use strict";function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i=e("./utils"),o=e("./helpers/normalizeHeaderName"),s={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=e("./adapters/xhr"):void 0!==n&&(t=e("./adapters/http")),t}(),transformRequest:[function(e,t){return o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){u.headers[e]={}}),i.forEach(["post","put","patch"],function(e){u.headers[e]=i.merge(s)}),t.exports=u}).call(this,e("_process"))},{"./adapters/http":2,"./adapters/xhr":2,"./helpers/normalizeHeaderName":22,"./utils":25,_process:28}],15:[function(e,t,n){"use strict";t.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},{}],16:[function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function i(e){for(var t,n,i=String(e),s="",u=0,a=o;i.charAt(0|u)||(a="=",u%1);s+=a.charAt(63&t>>8-u%1*8)){if((n=i.charCodeAt(u+=.75))>255)throw new r;t=t<<8|n}return s}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",t.exports=i},{}],17:[function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=e("./../utils");t.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var s=[];i.forEach(t,function(e,t){null!==e&&void 0!==e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),s.push(r(t)+"="+r(e))}))}),o=s.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},{"./../utils":25}],18:[function(e,t,n){"use strict";t.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},{}],19:[function(e,t,n){"use strict";var r=e("./../utils");t.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,s){var u=[];u.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),r.isString(i)&&u.push("path="+i),r.isString(o)&&u.push("domain="+o),!0===s&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},{"./../utils":25}],20:[function(e,t,n){"use strict";t.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},{}],21:[function(e,t,n){"use strict";var r=e("./../utils");t.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},{"./../utils":25}],22:[function(e,t,n){"use strict";var r=e("../utils");t.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},{"../utils":25}],23:[function(e,t,n){"use strict";var r=e("./../utils"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}}),s):s}},{"./../utils":25}],24:[function(e,t,n){"use strict";t.exports=function(e){return function(t){return e.apply(null,t)}}},{}],25:[function(e,t,n){"use strict";function r(e){return"[object Array]"===C.call(e)}function i(e){return"[object ArrayBuffer]"===C.call(e)}function o(e){return"undefined"!=typeof FormData&&e instanceof FormData}function s(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function u(e){return"string"==typeof e}function a(e){return"number"==typeof e}function c(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===C.call(e)}function d(e){return"[object File]"===C.call(e)}function h(e){return"[object Blob]"===C.call(e)}function p(e){return"[object Function]"===C.call(e)}function m(e){return l(e)&&p(e.pipe)}function v(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function g(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function y(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function b(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),r(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function w(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=w(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)b(arguments[n],e);return t}function E(e,t,n){return b(t,function(t,r){e[r]=n&&"function"==typeof t?x(t,n):t}),e}var x=e("./helpers/bind"),k=e("is-buffer"),C=Object.prototype.toString;t.exports={isArray:r,isArrayBuffer:i,isBuffer:k,isFormData:o,isArrayBufferView:s,isString:u,isNumber:a,isObject:l,isUndefined:c,isDate:f,isFile:d,isBlob:h,isFunction:p,isStream:m,isURLSearchParams:v,isStandardBrowserEnv:y,forEach:b,merge:w,extend:E,trim:g}},{"./helpers/bind":15,"is-buffer":26}],26:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}t.exports=function(e){return null!=e&&(r(e)||i(e)||!!e._isBuffer)}},{}],27:[function(e,t,n){(function(e){function n(e,t,n){function i(t){var n=m,r=v;return m=v=void 0,C=t,y=e.apply(r,n)}function o(e){return C=e,b=setTimeout(l,t),R?i(e):y}function a(e){var n=e-k,r=e-C,i=t-n;return L?E(i,g-r):i}function c(e){var n=e-k,r=e-C;return void 0===k||n>=t||n<0||L&&r>=g}function l(){var e=x();if(c(e))return f(e);b=setTimeout(l,a(e))}function f(e){return b=void 0,T&&m?i(e):(m=v=void 0,y)}function d(){void 0!==b&&clearTimeout(b),C=0,m=k=v=b=void 0}function h(){return void 0===b?y:f(x())}function p(){var e=x(),n=c(e);if(m=arguments,v=this,k=e,n){if(void 0===b)return o(k);if(L)return b=setTimeout(l,t),i(k)}return void 0===b&&(b=setTimeout(l,t)),y}var m,v,g,y,b,k,C=0,R=!1,L=!1,T=!0;if("function"!=typeof e)throw new TypeError(u);return t=s(t)||0,r(n)&&(R=!!n.leading,L="maxWait"in n,g=L?w(s(n.maxWait)||0,t):g,T="trailing"in n?!!n.trailing:T),p.cancel=d,p.flush=h,p}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){return!!e&&"object"==typeof e}function o(e){return"symbol"==typeof e||i(e)&&b.call(e)==c}function s(e){if("number"==typeof e)return e;if(o(e))return a;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(l,"");var n=d.test(e);return n||h.test(e)?p(e.slice(2),n?2:8):f.test(e)?a:+e}var u="Expected a function",a=NaN,c="[object Symbol]",l=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,h=/^0o[0-7]+$/i,p=parseInt,m="object"==typeof e&&e&&e.Object===Object&&e,v="object"==typeof self&&self&&self.Object===Object&&self,g=m||v||Function("return this")(),y=Object.prototype,b=y.toString,w=Math.max,E=Math.min,x=function(){return g.Date.now()};t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function s(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function u(){v&&p&&(v=!1,p.length?m=p.concat(m):g=-1,m.length&&a())}function a(){if(!v){var e=o(u);v=!0;for(var t=m.length;t;){for(p=m,m=[];++g<t;)p&&p[g].run();g=-1,t=m.length}p=null,v=!1,s(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var f,d,h=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var p,m=[],v=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new c(e,t)),1!==m.length||v||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],29:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("axios"),u=r(s),a=e("lodash.debounce"),c=r(a),l=e("./dropdown"),f=r(l),d=function(){function e(t,n){var r=this;i(this,e);var o={source:null,maxResults:10,charactersRequired:5,ajaxDelay:250,debug:!1};this.config=Object.assign({},o,n);try{this.setInput(t)}catch(e){return void window.console.error(e)}this.config.debug&&console.debug("Initialise dropdown menu"),this.dropdown=new f.default(this.input,this.config),this.search=(0,c.default)(this.search.bind(this),this.config.ajaxDelay),this.bindInputEvents(),this.onClickOutside=this.onClickOutside.bind(this),this.handleEvent=function(e){switch(e.type){case"focus":r.onFocus();break;case"input":r.search(r.input.value);break;case"keydown":r.onKeyDown(e)}},this.lastSearch=null,this.selected=void 0}return o(e,[{key:"onKeyDown",value:function(e){this.dropdown.isVisible&&this.dropdown.keyDownEvent(e),9!==e.keyCode&&13!==e.keyCode||(this.finishTyping(),this.focusToNextControl())}},{key:"onFocus",value:function(){this.config.debug&&console.debug("Focus input"),document.body.addEventListener("click",this.onClickOutside),document.addEventListener("keydown",this)}},{key:"focusToNextControl",value:function(){this.config.debug&&console.debug("Tab to next input"),this.input.blur()}},{key:"onClickOutside",value:function(e){e.target!==this.input&&(this.config.debug&&console.debug("Close dropdown"),this.finishTyping())}},{key:"finishTyping",value:function(){this.dropdown.remove(),document.body.removeEventListener("click",this.onClickOutside),document.removeEventListener("keydown",this),this.input.removeEventListener("click",this)}},{key:"setInput",value:function(e){if(this.config.debug&&console.debug("Assign to "+e),"string"==typeof e)this.input=document.querySelector(e);else{if(!e.tagName||"input"!==e.tagName.toLowerCase())throw new Error("1 arguement should be String or instance of Element with tagName input");this.input=e}}},{key:"bindInputEvents",value:function(){this.input.addEventListener("input",this,!1),this.input.addEventListener("focus",this,!1)}},{key:"search",value:function(e){this.config.debug&&console.debug("Searching for "+e);var t=this;this.getResults(e).then(function(e){t.dropdown.showResults(e.data.addresses)}).catch(function(e){console.error(e)})}},{key:"getResults",value:function(e){return u.default.get(this.config.source,{params:{q:e}})}}]),e}();n.default=d},{"./dropdown":30,axios:1,"lodash.debounce":27}],30:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("axios"),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u={UP:38,DOWN:40,ENTER:13,ESC:27},a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,e);var i={debug:!1,noResultsMessage:"Sorry there were no results for that query"};this.config=Object.assign({},i,n),this.baseElement=t,this.isCreated=!1,this.isVisible=!1,this.dropdown=null,this.source=null,this.fields=null,this.activeElement=null,this.isLoaderShown=!1,this.createElement(),this.setupFieldMap()}return i(e,[{key:"createElement",value:function(){var e=document.createElement("div");e.className="autocomplete-wrapper",this.baseElement.parentNode.insertBefore(e,this.baseElement),e.appendChild(this.baseElement);var t=document.createElement("div");t.className="autocomplete-dropdown",t.style.visibility="hidden",t.addEventListener("click",function(e){return e.stopPropagation()}),e.append(t),this.dropdown=t,this.isCreated=!0}},{key:"setupFieldMap",value:function(){var e=this.baseElement.getAttribute("data-fields");if("string"==typeof e){var t=JSON.parse(e.replace(/&quot;/g,'"'));this.config.debug&&console.debug("Fetching field map",t),this.fields=t}}},{key:"getResults",value:function(e){return s.default.get(this.source,{params:{q:e}})}},{key:"fetchDetails",value:function(e){this.config.debug&&console.debug("Fetch details for",e),this.hide();var t=e.DPID;this.source=this.baseElement.getAttribute("data-details"),this.makeRequest(t)}},{key:"makeRequest",value:function(e){var t=this;this.config.debug&&console.debug("Getting results for NZ Post DPID: "+e),this.getResults(e).then(function(e){t.fillDetails(e.data.details[0])}).catch(function(e){console.error(e)})}},{key:"fillDetails",value:function(e){this.config.debug&&console.debug(e),this.mapResults(e),this.clear();var t="";e.AddressLine1&&(t+=""+e.AddressLine1),e.AddressLine2&&(t+=", "+e.AddressLine2),e.AddressLine3&&(t+=", "+e.AddressLine3),e.AddressLine4&&(t+=", "+e.AddressLine4),e.AddressLine5&&(t+=", "+e.AddressLine5),this.baseElement.value=t}},{key:"mapResults",value:function(e){var t=this;this.fields&&Object.keys(this.fields).forEach(function(n){var r=document.getElementById(n);t.config.debug&&console.debug("Found form field",r),"div"===r.tagName.toLowerCase()&&(r=document.getElementsByName(n)[0]);var i=t.fields[n];t.config.debug&&console.debug("Match NZ Address field for "+i);var o=e[i];t.config.debug&&console.debug("Value matched for "+i+": "+o),t.config.debug&&console.debug("Filling field "+r+" with "+o),r.value=o})}},{key:"clickEvent",value:function(e){this.fetchDetails(e.target.listRow)}},{key:"createRow",value:function(e){var t=document.createElement("li");return t.innerHTML=e.FullAddress,t.id=e.DPID,t.addEventListener("click",this.clickEvent.bind(this)),t.listRow=e,t}},{key:"createElementsList",value:function(e){var t=document.createElement("ul"),n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;t.appendChild(this.createRow(u))}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return t}},{key:"showResults",value:function(e){var t=this;if(this.clear(),this.config.debug&&console.debug(e),e&&0!==e.length){var n=this.createElementsList(e);this.dropdown.appendChild(n),this.setActiveElement(n.firstChild),this.onEnterClick=function(){return t.fetchDetails(t.activeElement.listRow)}}else this.dropdown.appendChild(this.createEmptyMessage());this.show()}},{key:"createEmptyMessage",value:function(){var e=document.createElement("ul"),t=document.createElement("li");return t.innerHTML=this.config.noResultsMessage,e.appendChild(t),e}},{key:"setActiveElement",value:function(e){this.config.debug&&console.debug("Set active element"),this.activeElement&&(this.activeElement.className="");var t=e;t.className="active",this.activeElement=t,this.config.debug&&console.debug("Setting active element",t)}},{key:"show",value:function(){this.dropdown.style.visibility="visible",this.isVisible=!0}},{key:"hide",value:function(){this.dropdown.style.visibility="hidden",this.isVisible=!1}},{key:"resetVars",value:function(){this.isCreated=!1,this.isVisible=!1,this.activeElement=null,this.isLoaderShown=!1}},{key:"showLoader",value:function(){this.config.debug&&console.debug("Loading...")}},{key:"clear",value:function(){this.dropdown.innerHTML=""}},{key:"select",value:function(){console.log("selected")}},{key:"remove",value:function(){this.config.debug&&console.debug("Remove dropdown"),this.hide(),this.resetVars()}},{key:"keyDownEvent",value:function(e){var t=!0;switch(e.keyCode){case u.DOWN:if(!this.activeElement||!this.activeElement.nextSibling)return;this.setActiveElement(this.activeElement.nextSibling);break;case u.UP:if(!this.activeElement||!this.activeElement.previousSibling)return;this.setActiveElement(this.activeElement.previousSibling);break;case u.ENTER:this.onEnterClick&&this.onEnterClick();break;case u.ESC:this.remove();break;default:t=!1}t&&e.preventDefault()}}]),e}();n.default=a},{axios:1}],31:[function(e,t,n){"use strict";var r=e("./autocomplete"),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=document.querySelectorAll("input.addressfinder"),s=!0,u=!1,a=void 0;try{for(var c,l=o[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var f=c.value;!function(e){var t=e.getAttribute("data-suggest"),n={source:t,debug:!1};new i.default(e,n)}(f)}}catch(e){u=!0,a=e}finally{try{!s&&l.return&&l.return()}finally{if(u)throw a}}},{"./autocomplete":29}]},{},[31])(31)});